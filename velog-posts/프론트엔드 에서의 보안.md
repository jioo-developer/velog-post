<h2 id="프론트엔드에서의-보안이란">프론트엔드에서의 보안이란</h2>
<p>프론트엔드에서의 보안은 서버로 데이터를 전달하기 전 까지 악의적인 요청이 서버에 도달하지 않도록 1차 방어선 역할을 하는 것이 보안 이라고 생각한다.</p>
<blockquote>
<ul>
<li>프론트 : 사용자 입력 검증 , 데이터 표시(암호화) 보안처리 , 안전한 데이터 api 요청 등</li>
</ul>
</blockquote>
<ul>
<li>백엔드 : 원본 데이터 암호화 , 저장 , 검증 , 접근 , 제어 등<br />
이처럼 두 영역은 상호 보완적이며 협력적이다.
프론트에서는 1차로 보안을 강화하고 , 백엔드에서 추가 보안 조치를 수행하는 구조가<br />전체 시스템의 보안 수준을 높이면서도, 각 영역의 보안 취약점을 확신 시키지 않도록<br />책임을 분리 할 수 있다.</li>
</ul>
<h2 id="도메인-네임">도메인 네임</h2>
<h3 id="기본--개념">기본  개념</h3>
<p>우리가 도로명 주소로 각 건물을 식별하듯 웹 리소스의 위치 식별자로는 url을 사용한다. 
네비게이션에 목적지 주소를 입력하면 해당 주소지를 찾아갈 수 있듯,
웹 리소스에 접근할 때는 리소스를 제공하는 서버 주소를 요청 해서 보내야한다.</p>
<h3 id="도메인-네임의-구조">도메인 네임의 구조</h3>
<p>url의 호스트 부분을 주목 해보자 컴퓨터가 서버를 식별하려면 ip 주소가 필요하지만
ip주소와 같은 숫자의 나열은 사람이 기억하기 어렵다, 그래서 대체 용도로 ip 주소에
매핑되는 인간 친화적인 무자열을 사용하는데 이를 도메인 네임이라고 부른다.
우리가 웹 사이트 주소를 기억하는 것이 바로 도메인 네임이다</p>
<h2 id="url">url</h2>
<h3 id="기본개념">기본개념</h3>
<p>url은 서버를 식별하는 ip주소와 서버 내 리소스의 경로로 구성되어 있다. 
브라우저의 주소창에 url을 입력하면 브라우저 엔진은 이를 해석하여
해당 ip 주소의 서버에 접속하고 특정 리소스를 요청하게 된다.</p>
<h3 id="url의-구조">url의 구조</h3>
<p>스키마 : http / https 같은 통신 프로토콜을 지칭
host : 요청을 보낼 호스트 서버 , ip 주소나 도메인 네임을 표시
port : 서버에서 특정 서비스를 위해 열어든 게이트 번호 
path : 서비스 내 특정 리소스의 경로
query :  리소스에서 조건부 요청에 추가적으로 사용 할 수 있는 매개변수</p>
<h2 id="http">http</h2>
<h3 id="기본-개념">기본 개념</h3>
<p>http는 웹 통신 프로토콜이며 웹에서 클라이언트와 서버가 데이터를 주고 받을 때 사용하는 통신 방식을 체계화 한것이다. 여기에는 요청- 응답 - 에러 상태표시 - 연결관리 - 캐싱 - 인증 등 
여러 통신 규칙과 절차가 포함된다.</p>
<p>클라이언트가 서버에 http 요청을 보내면 서버는 클라이언트로 이에 대한 http에서 요청은 
request이고 응답은 response이다. 둘은 내용은 다르지만 header/body 구조는 같다</p>
<h3 id="헤더">헤더</h3>
<p>헤더의 시작 줄에는 주요 정보가 포함된다.
요청 헤더의 시작 줄 에는 요청 메소드 , url,http 버전이 표시되며 
응답 헤더의 시작줄에는 http 버전 , 상태 코드, 상태 결과 , 메시지가 전달된다</p>
<h3 id="origin">origin</h3>
<p>origin은 웹 보안의 기본 단위로 웹 리소스의 출처를 의미한다.
url 구조로 봤을때 host 의 도메인 네임 부분이 바로 origin이다</p>
<p>웹 브라우저는 origin을 기준으로 앱에 외부 리소스가 접근하는 것을 제안한다 
또한 서버는 origin 정보에서 요청의 출처를 파악해 내부 리소스 접근을 제어한다.</p>
<h2 id="브라우저-정책">브라우저 정책</h2>
<h3 id="sop-동일-출처-정책">SOP 동일 출처 정책</h3>
<p>앞서 설명한 대로 외부 리소스가 앱에 접근하는 것은 보안 위험을 수반한다.
이를 방지하기 위해 브라우저에서 사용하는 기본적인 보안 정책이 SOP이다 </p>
<p>SOP는 같은 origin 리소스의 접근만을 허용하는 보안 정책이며 외부 리소스를 요청하고
응답 받을 때 브라우저는 해당 응답의 출처와 현재 웹 페이지의 출처를 비교한다.
그리고 출처가 다른 리소스의 접근을 차단 함으로써  앱의 보안을 유지한다.</p>
<p>SOP 적용 여부는 대체로 HTML 태그로 다른 출처의 리소스를 불러 오는 것은 허용하나 Js로 이러한 리소스의 내용을 읽거나 조작 하려고 할때 발생한다 </p>
<h3 id="cors-동일-출처-정책">CORS 동일 출처 정책</h3>
<h3 id="기본개념-1">기본개념</h3>
<p>크로스 오리진 (교차 출처)의 접근을 허용 할 수 있게 해주는 보안 메커니즘 이며 서버가 
HTTP 응답 &quot;헤더&quot;에 접근 허용 조건을 명시하면 이를 만족하는 요청에서는 SOP 제한이 
적용 되지 않는다. 이러한 조건을 설정하는 걸 &quot;CORS 헤더&quot; 라고 하며 이를 통해 
클라이언트는 외부 리소스에 안전하게 접근 할 수 있다.</p>
<h3 id="작동-방식">작동 방식</h3>
<p>CORS 헤더 설정은 클라이언트 리소스 접근을 제안 하지만, 
서버로 전송되는 요청 자체는 막지 못한다</p>
<p>예를 들어 공격자가 사용자 인증 정보를 탈취해서 서버에 Delete 요청을 보내는 경우
서버는 요청의 출처를 확인 하지 않고 사용자의 정보를 삭제 할 수 있다</p>
<p>이렇게 허용되지 않은 출처로 부터 요청이 서버의 데이터를 수정하거나 삭제하는 것을 
방지하기위해 CORS는 단순 요청과 위험 가능성이 있는 요청을 구분 해야한다 </p>
<h3 id="사전요청-pre-flight">사전요청 (Pre-flight)</h3>
<blockquote>
<ol>
<li>단순 요청 : 기존 데이터를 수정/삭제 하지 않는 요청이다<br />구체적으로 밑과 같은 조건을 모두 만족해야한다.</li>
<li>단순 요청 처리에서 브라우저는 서버에 바로 요청을 보내고<br />서버의 응답헤더를 확인하여 CORS 정책을 검사한다<br /></li>
</ol>
</blockquote>
<ul>
<li>메서드  GET / POST 중 하나를 사용</li>
<li>헤더 : 자동 설정 헤더와 커스텀 헤더를 사용 하지 않는 경우 </li>
<li>헤더의 content-type 중 설정된 값 중 하나 일 경우<br />
이 외 다른 조건이 있으면 무조건 pre-flight 사전 요청이 진행된다</li>
</ul>
<p><strong>pre-flight</strong>란 기존 데이터를 수정/삭제 할 가능성이 있는 요청으로 단순 요청 조건을 만족
하지 않으면 모두 사전 요청 처리 된다.</p>
<p>사전 요청 처리에서는 본 요청 전에 &quot;브라우저가&quot; 옵션 메서드를 사용 해 사전 요청을 보냄
서버는 허용되는 메서드, 헤더 등 cors 정책 정보를 응답 하고 브라우저는 본 요청이 허용 될지
판단한 뒤 그여부에 따라 본 요청을 보내 응답값을 처리한다.</p>
<p>사전 요청은 본 요청 전에 서버의 cors 정책을 확인함으로써 불필요한 요청을 방지하고
추가적인 보안 계층을 제공한다.</p>
<p>이 과정은 브라우저가 자동으로 처리하며 개발자가 직접 구현 할 필요는 없다.</p>
<p>cors 에러 해결이 주로 서버 측 설정에 의존하는 이유는 &quot;서버의 기본 설정이 cors를 거부&quot;하는 것이기 때문이다. 반면 클라이언트 측의 기본 설정은 브라우저가 cors를 사용 하도록 되어 있다 </p>
<blockquote>
<p><strong>정리하자면</strong></p>
</blockquote>
<ul>
<li>서버: 기본 설정은 CORS를 허용하지 않음.</li>
<li>브라우저: CORS 정책을 따르도록 되어 있음.
그래서 CORS 에러를 해결하려면 서버 측에서 Access-Control-Allow-Origin 등의 
헤더를 설정해줘야 하는 것<br />
쿠키 같은 경우엔 클라이언트에서도 credentials를 include 해줘야 하고 
서버 측에서도 Access-Control-Allow-Origin 를 true로 포함 해줘야 한다</li>
</ul>